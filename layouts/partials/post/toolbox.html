{{- $enableTOC := and (default true .Params.toc) (default true .Site.Params.toc) -}}
{{- $wordCount := default 280 .Site.Params.tocWordCount -}}
{{- $toc := .TableOfContents -}}
{{- $validTOC := and $toc (and (ne $toc "<nav id=\"TableOfContents\"></nav>") (gt .WordCount $wordCount)) -}}
{{- $enableTOC := and $enableTOC $validTOC -}}
{{- if $enableTOC -}}
<div class="offcanvas offcanvas-start surface" tabindex="-1" id="offcanvasTOC" aria-labelledby="offcanvasTOCLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasTOCLabel">{{ i18n "table_of_contents" }}</h5>
    <a role="button" data-bs-dismiss="offcanvas" aria-label="Close">
      <span class="fas fa-2x fa-fw fa-times"></span>
    </a>
  </div>
  <div class="offcanvas-body">
    {{ $toc }}
  </div>
</div>
{{- end -}}

<div class="post-toolbox position-absolute">
    <div class="row position-fixed gy-3">
        <div class="col-12 d-none d-md-block">
            <a id="sidebarToggler" class="fas fa-fw fa-2x fa-expand" role="button"></a>
        </div>
        {{- if $enableTOC -}}
        <div class="col-12">
            <a id="btnTOC" class="fas fa-fw fa-2x fa-list-alt" data-bs-toggle="offcanvas" 
                href="#offcanvasTOC" aria-controls="offcanvasTOC" role="button" title="{{ i18n "table_of_contents" }}"></a>
        </div>
        {{- end -}}
    </div>
</div>